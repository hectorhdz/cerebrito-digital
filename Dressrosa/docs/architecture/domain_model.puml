@startuml
!theme plain

title Dressrosa - Domain Model (High-Level)

class User {
  +id: UUID
  +username: string
  +full_name: string
  +email: string
  +active: bool
}

class Role {
  +id: UUID
  +name: string
}

class UserRole {
  +user_id: UUID
  +role_id: UUID
}

class EmployeeProfile {
  +user_id: UUID
  +manager_id: UUID
  +work_mode_default: enum(remote,office)
}

class LeaveType {
  +id: UUID
  +code: string
  +name: string
}

class LeaveSubtype {
  +id: UUID
  +leave_type_id: UUID
  +code: string
  +name: string
}

class LeaveRequest {
  +id: UUID
  +employee_id: UUID
  +leave_subtype_id: UUID
  +start_date: date
  +end_date: date
  +status: enum(pending,approved,declined,cancelled)
}

class LeaveApprovalAction {
  +id: UUID
  +leave_request_id: UUID
  +actor_id: UUID
  +role_used: enum(manager,hr)
  +action: enum(approve,decline,override)
  +reason: string
}

class LeaveBalanceEvent {
  +id: UUID
  +employee_id: UUID
  +leave_subtype_id: UUID
  +event_type: enum(accrual,reservation,consumption,reversal,adjustment)
  +units_days: decimal
}

class AttendanceRecord {
  +id: UUID
  +employee_id: UUID
  +work_date: date
  +clock_in: datetime
  +clock_out: datetime
  +work_mode: enum(remote,office)
}

class AttendanceEdit {
  +id: UUID
  +attendance_record_id: UUID
  +editor_id: UUID
  +reason: string
}

class AuditLog {
  +id: UUID
  +actor_id: UUID
  +entity_type: string
  +entity_id: UUID
  +action: string
}

User "1" -- "*" UserRole
Role "1" -- "*" UserRole
User "1" -- "1" EmployeeProfile
User "1" -- "*" LeaveRequest
LeaveType "1" -- "*" LeaveSubtype
LeaveSubtype "1" -- "*" LeaveRequest
LeaveRequest "1" -- "*" LeaveApprovalAction
User "1" -- "*" LeaveApprovalAction
User "1" -- "*" LeaveBalanceEvent
LeaveSubtype "1" -- "*" LeaveBalanceEvent
User "1" -- "*" AttendanceRecord
AttendanceRecord "1" -- "*" AttendanceEdit
User "1" -- "*" AuditLog

@enduml
